(()=>{var e={568:()=>{const e=document.querySelector(".dashboard__drag-area"),t=document.querySelector(".list-section"),n=document.querySelector(".list"),a=document.querySelector(".dashboard__btn-file"),s=document.querySelector(".dashboard__input-file");function r(e){const t=new DataTransfer;e.forEach(e=>{t.items.add(e)}),s.files=t.files}function o(e){var t=e.split("/")[0];if("application/pdf"==e||"image"==t||"video"==t)return!0}function i(e){t.style.display="block";const a=document.createElement("li");a.classList.add("complete"),a.innerHTML=`\n        <div class="col">\n            <img src="../build/img/pdf.png" alt="icon pdf">\n        </div>\n        <div class="col">\n            <div class="file-name">\n                <div class="name">${e.name}</div>\n                <span>Complete</span>\n            </div>\n            <div class="file-size">${(e.size/1048576).toFixed(2)} MB</div>\n        </div>\n        <div class="col">\n            <svg xmlns="http://www.w3.org/2000/svg" class="cross" height="20" width="20"><path d="m5.979 14.917-.854-.896 4-4.021-4-4.062.854-.896 4.042 4.062 4-4.062.854.896-4 4.062 4 4.021-.854.896-4-4.063Z"/></svg>\n            <svg xmlns="http://www.w3.org/2000/svg" class="tick" height="20" width="20"><path d="m8.229 14.438-3.896-3.917 1.438-1.438 2.458 2.459 6-6L15.667 7Z"/></svg>\n        </div>\n    `,n.prepend(a),a.querySelector(".cross").onclick=()=>a.remove()}a.onclick=()=>s.click(),s.onchange=()=>{n.innerHTML="",[...s.files].forEach(e=>{o(e.type)&&i(e)})},e.ondragover=t=>{t.preventDefault(),t.stopPropagation(),[...t.dataTransfer.items].forEach(t=>{o(t.type)&&e.classList.add("drag-over-effect")})},e.ondragleave=()=>{e.classList.remove("drag-over-effect")},e.ondrop=t=>{if(t.preventDefault(),t.stopPropagation(),n.innerHTML="",e.classList.remove("drag-over-effect"),t.dataTransfer.items){const e=[];[...t.dataTransfer.items].forEach(t=>{if("file"===t.kind){const n=t.getAsFile();o(n.type)&&(i(n),e.push(n))}}),r(e)}else[...t.dataTransfer.files].forEach(e=>{o(e.type)&&i(e)}),r(files)}},41:()=>{console.clear();const e=document.querySelector(".btn__escanear");let t={};const n=[],a=document.querySelector(".dashboard__input-file"),s=async(e,t)=>{try{const n=await t.getPage(e),a=await n.getOperatorList(),s=[pdfjsLib.OPS.paintImageXObject,pdfjsLib.OPS.paintImageXObjectRepeat,pdfjsLib.OPS.paintJpegXObject],r=[],o=[];return await Promise.all(a.fnArray.map(async(e,t)=>{if(s.includes(e)){const e=a.argsArray[t][0],s=await n.objs.get(e),i=s.data,l=s.width,c=s.height,d=function(e,t,n){const a=new Uint8ClampedArray(t*n*4);for(let s=0,r=0,o=t*n*4;s<o;)a[s++]=e[r++],a[s++]=e[r++],a[s++]=e[r++],a[s++]=255;return a}(i,l,c),u=new ImageData(d,l,c),f=document.createElement("canvas");f.width=l,f.height=c,f.getContext("2d").putImageData(u,0,0),r.push(f);const p=jsQR(d,l,c);p&&o.push(p.data)}})),{canvasList:r,qrDataList:o}}catch(e){return console.log(e),[]}};function r(){e.textContent="Escanear",e.disabled=!1,e.style.backgroundColor="",e.style.color="",e.style.backgroundColor="#122432;",e.style.color="#fff"}e.addEventListener("click",async()=>{e.textContent="",e.insertAdjacentHTML("beforeend",'\n    <svg width="30" height="30" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n                    <circle cx="18" cy="12" r="0" fill="#ffffff">\n                        <animate attributeName="r" begin=".67" calcMode="spline" dur="1.5s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0" />\n                    </circle>\n                    <circle cx="12" cy="12" r="0" fill="#ffffff">\n                        <animate attributeName="r" begin=".33" calcMode="spline" dur="1.5s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0" />\n                    </circle>\n                    <circle cx="6" cy="12" r="0" fill="#ffffff">\n                        <animate attributeName="r" begin="0" calcMode="spline" dur="1.5s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0" />\n                    </circle>\n                </svg>\n    '),t={},n.length=0,document.querySelector(".resultados").innerHTML="",await async function(){try{const e=a.files;await(async e=>{t={};let a=0;const r=[];for(const o of e){if("application/pdf"!==o.type){alert(`File ${o.name} is not a PDF file type`);continue}const e=new FileReader,i=new Promise(r=>{e.onload=async e=>{try{const o=new Uint8Array(e.target.result),i=pdfjsLib.getDocument(o),l=await i.promise,{canvasList:c,qrDataList:d}=await s(1,l);t[a]=JSON.stringify(d),a++;for(let e=0;e<c.length;e++){const t=c[e];n.push(t.toDataURL())}r()}catch(e){console.log(e),r()}}});r.push(i),e.readAsArrayBuffer(o)}await Promise.all(r)})(e);const r=Object.values(t).flatMap(JSON.parse);if(0===r.length)return void console.error("No se encontraron datos en los códigos QR.");linksProcesados=r.map(e=>{const t=e.match(/\/digital\/([^.]+)\.([^.]+)\.([^\/]+)/);return t&&4===t.length?{Codigo:t[1],Empresa:t[2],Rut:t[3]}:{}})}catch(e){console.error("Error al obtener o procesar el JSON:",e)}}(),function(e){const t=document.querySelector(".resultados");document.querySelector(".resultados-escaner").style.display="block",t.innerHTML="",function(e,t){if(e.length!==t.length)throw new Error("Los arrays deben tener la misma longitud");return e.map((e,n)=>({...e,Imagen:t[n]}))}(e,n).forEach((e,n)=>{const s=document.createElement("div");s.classList.add("resultados__contenedor"),s.innerHTML=`\n      <div class="resultados__items">\n      <div class="resultados__qr">\n          <img src="${e.Imagen}" alt="qr">\n      </div>\n      <div class="resultados__descripcion">\n          <h3 class="resultados__titulo">${a.files[n].name}</h3>\n          <div class="resultado__item">\n              <label>Código:</label>\n              <input type="text" class="codigo" value="${e.Codigo}">\n          </div>\n\n          <div class="resultado__item">\n              <label>Empresa:</label>\n              <input type="text" class="empresa" value="${e.Empresa}">\n          </div>\n\n          <div class="resultado__item">\n              <label>RUT:</label>\n              <input type="text" class="rut" value="${e.Rut}">\n          </div>\n      </div>\n  </div>\n      `,t.appendChild(s)})}(linksProcesados),e.textContent="¡Completado!",e.disabled=!0,e.style.backgroundColor="#dee1e5",e.style.color="black"}),a.addEventListener("change",()=>{r()}),document.querySelector(".dashboard__drag-area").addEventListener("drop",e=>{r()})}},t={};function n(a){var s=t[a];if(void 0!==s)return s.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";n(568),n(41)})()})();
//# sourceMappingURL=main.js.map
